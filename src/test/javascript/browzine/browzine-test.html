<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>browzine javascript unit tests</title>
        <link rel="stylesheet" type="text/css" href="../yui-test-3.18.1.css"/>
    </head>
    <body class="yui3-skin-sam">
    
    <ul>
        <li class="resource" data-doi="10.1" data-sid="pubmed-1">
            <div><a class="primaryLink" href="old">title 1</a></div>
            <div class="bookcover"><i/></div>
            <div class="resultInfo"></div>
            <div class="sourceInfo"></div>
        </li>
        <li class="resource" data-doi="10.2" data-sid="pubmed-2">
            <div><a class="primaryLink" href="old">title 2</a></div>
            <div class="bookcover"><i/></div>
            <div class="resultInfo"></div>
            <div class="sourceInfo"></div>
        </li>
        <li class="resource" data-sid="bib-3">
            <div><a class="primaryLink" href="old">title 3</a></div>
            <div class="bookcover"><i/></div>
            <div class="resultInfo"></div>
            <div class="sourceInfo"></div>
        </li>
        <li class="resource" data-doi="10.4" data-sid="pubmed-4">
            <div><a class="primaryLink" href="old">title 4</a></div>
            <div class="bookcover"><i/></div>
            <div class="resultInfo"></div>
            <div class="sourceInfo"></div>
        </li>
        <li class="resource" data-sid="pubmed-5">
            <div><a class="primaryLink" href="old">title 5</a></div>
            <div class="bookcover"><i/></div>
            <div class="resultInfo"></div>
            <div class="sourceInfo"></div>
        </li>
        <li class="resource" data-doi="10.6" data-sid="pubmed-6">
            <div><a class="primaryLink" href="old">title 6</a></div>
            <div class="bookcover"><i/></div>
            <div class="resultInfo"></div>
            <div class="sourceInfo"></div>
        </li>
    </ul>

    <script type="text/javascript">
        var XMLHttpRequest = function() {
            return {
                status: 200,
                open: function(a, b, c) {
                    this.id = /\/apps\/search\/browzine\/[a-z]+\/(.*)/.exec(b)[1];
                },
                send: function () {
                    if (this.id == '10.4') {
                        this.responseText = '{"data":{"doi":"' + this.id + '","contentLocation": "contentLocation"},"included":[{"coverImageUrl":"cover-url"}]}';
                    }
                    else if (this.id == '10.6') {
                        this.responseText = '{"data":{"doi":"' + this.id + '","retractionNoticeUrl": "retractionNoticeUrl"},"included":[{"coverImageUrl":"cover-url"}]}';
                    } else {
                        this.responseText = '{"data":{"doi":"' + this.id + '","fullTextFile": "fulltext-url"},"included":[{"coverImageUrl":"cover-url"}]}';
                    }
                    this.onload();
                }
            }
        }
            
            window.model = {"base-path":""};
        </script>
        <script type="text/javascript" src="../yui-test-3.18.1.js"></script>
        <script src="../../../main/javascript/lane.js" type="text/javascript"></script>
        <script src="../../../main/javascript/util.js" type="text/javascript"></script>
        <script src="../../../main/javascript/model.js" type="text/javascript"></script>
        <script src="../../../main/javascript/browzine.js" type="text/javascript"></script>
        <script src="browzine-test.js" type="text/javascript"></script>
    </body>
</html>
