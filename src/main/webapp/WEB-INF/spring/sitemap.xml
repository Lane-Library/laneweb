<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean name="edu.stanford.irt.cocoon.sitemap.Sitemap" abstract="true"
        class="edu.stanford.irt.cocoon.sitemap.SitemapImpl">
        <constructor-arg index="1" ref="sitemap"/>
        <constructor-arg index="2" ref="edu.stanford.irt.cocoon.sitemap.ComponentFactory"/>
    </bean>
    
    <bean id="parentNodeBuilder" abstract="true">
        <constructor-arg ref="edu.stanford.irt.cocoon.sitemap.ComponentFactory"/>
        <constructor-arg ref="edu.stanford.irt.cocoon.sitemap.expression.ExpressionParser"/>
    </bean>
    
    <bean name="sitemap"
        class="edu.stanford.irt.cocoon.sitemap.node.RootNodeBuilder"
        parent="parentNodeBuilder"/>
    
    <bean name="pipelines"
        class="edu.stanford.irt.cocoon.sitemap.node.PipelinesNodeBuilder"
        parent="parentNodeBuilder"/>
    
    <bean name="pipeline"
        class="edu.stanford.irt.cocoon.sitemap.node.PipelineNodeBuilder"
        parent="parentNodeBuilder"/>
    
    <bean name="match"
        class="edu.stanford.irt.cocoon.sitemap.node.MatchNodeBuilder"
        parent="parentNodeBuilder"/>
    
    <bean name="select"
        class="edu.stanford.irt.cocoon.sitemap.node.SelectNodeBuilder"
        parent="parentNodeBuilder"/>
    
    <bean name="generate"
        class="edu.stanford.irt.cocoon.sitemap.node.GenerateNodeBuilder"
        parent="parentNodeBuilder"/>
    
    <bean name="aggregate"
        class="edu.stanford.irt.cocoon.sitemap.node.AggregateNodeBuilder"
        parent="parentNodeBuilder"/>
    
    <bean name="part"
        class="edu.stanford.irt.cocoon.sitemap.node.PartNodeBuilder"
        parent="parentNodeBuilder"/>
    
    <bean name="transform"
        class="edu.stanford.irt.cocoon.sitemap.node.TransformNodeBuilder"
        parent="parentNodeBuilder"/>
    
    <bean name="serialize"
        class="edu.stanford.irt.cocoon.sitemap.node.SerializeNodeBuilder"
        parent="parentNodeBuilder"/>
    
    <bean name="edu.stanford.irt.cocoon.sitemap.match.Matcher/wildcard"
        class="edu.stanford.irt.cocoon.sitemap.match.WildcardMatcher">
        <constructor-arg value="sitemap-uri"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.sitemap.match.Matcher/url-decoding-wildcard"
        class="edu.stanford.irt.cocoon.sitemap.match.URLDecodingMatcher">
        <constructor-arg value="sitemap-uri"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.sitemap.match.Matcher/regexp"
        class="edu.stanford.irt.cocoon.sitemap.match.RegexpMatcher">
        <constructor-arg value="sitemap-uri"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.sitemap.match.Matcher/regex-parameter"
        class="edu.stanford.irt.cocoon.sitemap.match.ParameterRegexpMatcher"/>
    
    <bean name="edu.stanford.irt.cocoon.sitemap.select.Selector/ipgroup"
        class="edu.stanford.irt.laneweb.ipgroup.IPGroupSelector"/>
    
    <bean name="edu.stanford.irt.cocoon.sitemap.select.Selector/logged-in"
        class="edu.stanford.irt.cocoon.sitemap.select.ModelAttributeSelector">
        <property name="attributeName" value="sunetid"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.sitemap.select.Selector/resource-exists"
        class="edu.stanford.irt.cocoon.sitemap.select.ResourceExistsSelector">
        <constructor-arg ref="edu.stanford.irt.cocoon.source.SourceResolver"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.sitemap.Sitemap/sitemap" parent="edu.stanford.irt.cocoon.sitemap.Sitemap">
        <constructor-arg index="0" value="/sitemap.xmap"/>
    </bean>

    <bean name="edu.stanford.irt.cocoon.sitemap.Sitemap/content" parent="edu.stanford.irt.cocoon.sitemap.Sitemap">
        <constructor-arg index="0" value="/content.xmap"/>
    </bean>

    <bean name="edu.stanford.irt.cocoon.sitemap.Sitemap/eresources" parent="edu.stanford.irt.cocoon.sitemap.Sitemap">
        <constructor-arg index="0" value="/eresources.xmap"/>
    </bean>

    <bean name="edu.stanford.irt.cocoon.sitemap.Sitemap/applications" parent="edu.stanford.irt.cocoon.sitemap.Sitemap">
        <constructor-arg index="0" value="/applications.xmap"/>
    </bean>

    <bean name="edu.stanford.irt.cocoon.sitemap.Sitemap/rss" parent="edu.stanford.irt.cocoon.sitemap.Sitemap">
        <constructor-arg index="0" value="/rss.xmap"/>
    </bean>
	
	<bean name="edu.stanford.irt.cocoon.sitemap.Sitemap/classes" parent="edu.stanford.irt.cocoon.sitemap.Sitemap">
	    <constructor-arg index="0" value="/classes.xmap"/>
    </bean>

    <bean name="edu.stanford.irt.cocoon.sitemap.Sitemap/mobile" parent="edu.stanford.irt.cocoon.sitemap.Sitemap">
        <constructor-arg index="0" value="/mobile.xmap"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.sitemap.Sitemap/bookmarks" parent="edu.stanford.irt.cocoon.sitemap.Sitemap">
        <constructor-arg index="0" value="classpath:/edu/stanford/irt/laneweb/bookmarks/bookmarks.xmap"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.sitemap.expression.ExpressionParser"
        class="edu.stanford.irt.cocoon.sitemap.expression.ExpressionParser"/>
    
    <bean id="edu.stanford.irt.cocoon.sitemap.node.PipelinesNode"
        class="edu.stanford.irt.cocoon.sitemap.node.PipelinesNode"
        scope="prototype"/>
    
    <bean id="edu.stanford.irt.cocoon.sitemap.node.PipelineNode"
        class="edu.stanford.irt.cocoon.sitemap.node.PipelineNode"
        scope="prototype"/>
    
    <bean id="edu.stanford.irt.cocoon.sitemap.node.MatchNode"
        class="edu.stanford.irt.cocoon.sitemap.node.MatchNode"
        scope="prototype"/>
    
    <bean id="edu.stanford.irt.cocoon.sitemap.node.SelectNode"
        class="edu.stanford.irt.cocoon.sitemap.node.SelectNode"
        scope="prototype">
        <property name="componentFactory" ref="edu.stanford.irt.cocoon.sitemap.ComponentFactory"/>
    </bean>
    
    <bean id="edu.stanford.irt.cocoon.sitemap.node.AbstractPipelineComponentNode"
        scope="prototype"
        abstract="true">
        <constructor-arg ref="edu.stanford.irt.cocoon.sitemap.ComponentFactory"/>
        <constructor-arg ref="edu.stanford.irt.cocoon.source.SourceResolver"/>
    </bean>
        
    <bean id="edu.stanford.irt.cocoon.sitemap.node.GenerateNode"
        class="edu.stanford.irt.cocoon.sitemap.node.GenerateNode"
        parent="edu.stanford.irt.cocoon.sitemap.node.AbstractPipelineComponentNode"/>
    
    <bean id="edu.stanford.irt.cocoon.sitemap.node.AggregateNode"
        class="edu.stanford.irt.cocoon.sitemap.node.AggregateNode"
        parent="edu.stanford.irt.cocoon.sitemap.node.AbstractPipelineComponentNode"/>
    
    <bean id="edu.stanford.irt.cocoon.sitemap.node.PartNode"
        class="edu.stanford.irt.cocoon.sitemap.node.PartNode"
        parent="edu.stanford.irt.cocoon.sitemap.node.AbstractPipelineComponentNode"/>
    
    <bean id="edu.stanford.irt.cocoon.sitemap.node.TransformNode"
        class="edu.stanford.irt.cocoon.sitemap.node.TransformNode"
        parent="edu.stanford.irt.cocoon.sitemap.node.AbstractPipelineComponentNode"/>
    
    <bean id="edu.stanford.irt.cocoon.sitemap.node.SerializeNode"
        class="edu.stanford.irt.cocoon.sitemap.node.SerializeNode"
        parent="edu.stanford.irt.cocoon.sitemap.node.AbstractPipelineComponentNode"/>

</beans>