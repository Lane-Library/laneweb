<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd">
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Pipeline/noncaching"
        class="edu.stanford.irt.cocoon.pipeline.NonCachingPipeline"
        scope="prototype">
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Pipeline/expires"
        class="edu.stanford.irt.cocoon.pipeline.ExpiresCachingPipeline"
        scope="prototype">
        <constructor-arg ref="javax.cache.Cache"/>
        <constructor-arg value="300"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Pipeline/throttling"
        class="edu.stanford.irt.cocoon.pipeline.ThrottlingPipeline"
        scope="prototype">
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Pipeline/caching"
        class="edu.stanford.irt.cocoon.pipeline.CachingPipeline"
        scope="prototype">
        <constructor-arg ref="javax.cache.Cache"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Generator/file"
        class="edu.stanford.irt.cocoon.pipeline.generate.URLGenerator"
        scope="prototype">
        <constructor-arg value="file"/>
        <constructor-arg ref="edu.stanford.irt.cocoon.xml.SAXParser/xml"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Generator/html"
        class="edu.stanford.irt.cocoon.pipeline.generate.URLGenerator"
        scope="prototype">
        <constructor-arg value="html"/>
        <constructor-arg ref="edu.stanford.irt.cocoon.xml.SAXParser/html"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Generator/parameter-map"
        class="edu.stanford.irt.laneweb.search.ParameterMapGenerator"
        parent="edu.stanford.irt.laneweb.cocoon.AbstractMarshallingGenerator"/>

    <bean name="edu.stanford.irt.cocoon.pipeline.Aggregator/&lt;aggregator&gt;"
        class="edu.stanford.irt.cocoon.pipeline.generate.AggregatorImpl"
        scope="prototype">
        <constructor-arg value="&lt;aggregator&gt;"/>
    </bean>

    <bean name="edu.stanford.irt.cocoon.pipeline.Generator/seminars"
        class="edu.stanford.irt.laneweb.seminars.SeminarsGenerator"
        scope="prototype">
        <constructor-arg ref="edu.stanford.irt.cocoon.source.SourceResolver"/>
        <constructor-arg ref="edu.stanford.irt.cocoon.xml.SAXParser/html"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Generator/bib-status"
        class="edu.stanford.irt.laneweb.voyager.BibStatusGenerator"
        scope="prototype">
        <constructor-arg ref="edu.stanford.irt.cocoon.source.SourceResolver"/>
        <constructor-arg ref="edu.stanford.irt.cocoon.xml.SAXParser/xml"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Generator/classes"
        class="edu.stanford.irt.laneweb.classes.ClassesGenerator"
        scope="prototype">
        <constructor-arg value="classes"/>
        <constructor-arg ref="edu.stanford.irt.cocoon.xml.SAXParser/xml"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Generator/noncached-classes"
        class="edu.stanford.irt.laneweb.classes.RootElementProvidingGenerator"
        scope="prototype">
        <constructor-arg value="noncached-classes"/>
        <constructor-arg ref="edu.stanford.irt.cocoon.xml.SAXParser/xml"/>
    </bean>
    
    <bean id="edu.stanford.irt.laneweb.cocoon.AbstractMarshallingGenerator"
        abstract="true" scope="prototype">
        <constructor-arg ref="org.springframework.oxm.Marshaller"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Transformer/namespace-filter"
        class="edu.stanford.irt.cocoon.pipeline.transform.NamespaceFilter"
        scope="prototype"/>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Transformer/xinclude"
        class="edu.stanford.irt.cocoon.pipeline.transform.XIncludeTransformer"
        scope="prototype">
        <constructor-arg ref="edu.stanford.irt.cocoon.xml.XIncludePipe"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Transformer/debug"
        class="edu.stanford.irt.laneweb.cocoon.DebugTransformer"
        scope="prototype"/>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Transformer/saxon"
        class="edu.stanford.irt.cocoon.pipeline.transform.TraxTransformer"
        scope="prototype">
        <constructor-arg value="saxon"/>
        <constructor-arg ref="edu.stanford.irt.cocoon.xml.TransformerHandlerFactory/saxon"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Transformer/textNodeParser"
        class="edu.stanford.irt.laneweb.cocoon.TextNodeParsingTransformer"
        scope="prototype">
        <constructor-arg value="textNodeParser"/>
        <constructor-arg ref="edu.stanford.irt.cocoon.xml.SAXParser/html-fragment"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Transformer/joost"
        class="edu.stanford.irt.cocoon.pipeline.transform.TraxTransformer"
        scope="prototype">
        <constructor-arg value="joost"/>
        <constructor-arg ref="edu.stanford.irt.cocoon.xml.TransformerHandlerFactory/joost"/>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Serializer/xml"
        class="edu.stanford.irt.cocoon.pipeline.serialize.TransformerSerializer"
        scope="prototype">
        <constructor-arg value="xml"/>
        <constructor-arg ref="javax.xml.transform.sax.SAXTransformerFactory/saxon"/>
        <constructor-arg>
            <props>
                <prop key="method">xml</prop>
            </props>
        </constructor-arg>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Serializer/xhtml"
        class="edu.stanford.irt.cocoon.pipeline.serialize.TransformerSerializer"
        scope="prototype">
        <constructor-arg value="xhtml"/>
        <constructor-arg ref="javax.xml.transform.sax.SAXTransformerFactory/saxon"/>
        <constructor-arg>
            <props>
                <prop key="method">xhtml</prop>
                <prop key="doctype-public">-//W3C//DTD XHTML 1.0 Strict//EN</prop>
                <prop key="doctype-system">http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd</prop>
                <prop key="encoding">UTF-8</prop>
                <prop key="indent">no</prop>
                <prop key="omit-xml-declaration">yes</prop>
            </props>
        </constructor-arg>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Serializer/html5"
        class="edu.stanford.irt.laneweb.cocoon.HTML5Serializer"
        scope="prototype">
        <constructor-arg value="html5"/>
        <constructor-arg ref="javax.xml.transform.sax.SAXTransformerFactory/saxon"/>
        <constructor-arg>
            <props>
                <prop key="method">xhtml</prop>
                <prop key="encoding">UTF-8</prop>
                <prop key="indent">no</prop>
                <prop key="omit-xml-declaration">yes</prop>
            </props>
        </constructor-arg>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Serializer/html5-indent"
        class="edu.stanford.irt.laneweb.cocoon.HTML5Serializer"
        scope="prototype">
        <constructor-arg value="html5"/>
        <constructor-arg ref="javax.xml.transform.sax.SAXTransformerFactory/saxon"/>
        <constructor-arg>
            <props>
                <prop key="method">xhtml</prop>
                <prop key="encoding">UTF-8</prop>
                <prop key="indent">yes</prop>
                <prop key="omit-xml-declaration">yes</prop>
            </props>
        </constructor-arg>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Serializer/text"
        class="edu.stanford.irt.cocoon.pipeline.serialize.TransformerSerializer"
        scope="prototype">
        <constructor-arg value="text"/>
        <constructor-arg ref="javax.xml.transform.sax.SAXTransformerFactory/saxon"/>
        <constructor-arg>
            <props>
                <prop key="method">text</prop>
            </props>
        </constructor-arg>
    </bean>
    
    <bean name="edu.stanford.irt.cocoon.pipeline.Transformer/eventlist"
        class="edu.stanford.irt.laneweb.classes.EventListTransformer"
        scope="prototype">
        <constructor-arg ref="edu.stanford.irt.cocoon.source.SourceResolver"/>
        <constructor-arg ref="edu.stanford.irt.cocoon.xml.SAXParser/xml"/>
    </bean>
    
</beans>
