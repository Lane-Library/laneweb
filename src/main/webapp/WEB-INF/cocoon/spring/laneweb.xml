<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:pipeline="http://cocoon.apache.org/schema/pipeline"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
    http://cocoon.apache.org/schema/pipeline http://cocoon.apache.org/schema/pipeline/cocoon-pipeline-1.0.xsd">

    <bean id="edu.stanford.irt.cocoon.spring.SitemapRequestHandler"
        class="edu.stanford.irt.cocoon.spring.SitemapRequestHandler">
        <property name="methodsNotAllowed">
            <set>
                <value>OPTIONS</value>
                <value>PROPFIND</value>
            </set>
        </property>
        <lookup-method name="getRequestProcessor" bean="org.apache.cocoon.servlet.RequestProcessor"
        />
    </bean>

    <bean id="org.apache.cocoon.processing.ProcessInfoProvider"
        class="org.apache.cocoon.processing.impl.ProcessInfoProviderImpl">
        <property name="servletContext" ref="javax.servlet.ServletContext"/>
    </bean>

    <bean name="org.apache.cocoon.caching.Cache" class="org.apache.cocoon.caching.impl.CacheImpl">
        <property name="store" ref="org.apache.excalibur.store.Store"/>
    </bean>

    <bean name="org.apache.excalibur.store.Store"
        class="org.apache.cocoon.components.store.impl.EHDefaultStore" init-method="init"
        destroy-method="destroy">
        <property name="maxMemObjects" value="1000"/>
        <property name="useCacheDirectory" value="true"/>
        <property name="settings" ref="org.apache.cocoon.configuration.Settings"/>
    </bean>

    <bean name="org.apache.excalibur.store.Store/TransientStore"
        class="edu.stanford.irt.laneweb.store.TransientStore">
        <property name="storeJanitor" ref="org.apache.excalibur.store.StoreJanitor"/>
    </bean>

    <bean id="org.apache.excalibur.store.StoreJanitor"
        class="edu.stanford.irt.laneweb.store.StoreJanitor"/>

    <bean name="org.apache.excalibur.xml.xpath.XPathProcessor"
        class="edu.stanford.irt.laneweb.XPathProcessor"/>

    <bean id="org.apache.commons.httpclient.HttpClient"
        class="org.apache.commons.httpclient.HttpClient">
        <constructor-arg>
            <bean class="edu.stanford.irt.laneweb.httpclient.ConnectionManager">
                <property name="maxTotalConnections" value="30"/>
                <property name="defaultMaxConnectionsPerHost" value="10"/>
                <property name="connectionTimeout" value="20000"/>
            </bean>
        </constructor-arg>
    </bean>

    <bean name="org.apache.excalibur.source.SourceFactory/http"
        class="edu.stanford.irt.laneweb.httpclient.HTTPClientSourceFactory">
        <property name="httpClient" ref="org.apache.commons.httpclient.HttpClient"/>
    </bean>

    <bean name="javax.sql.DataSource/eresources"
        class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="java:comp/env/jdbc/eresources"/>
    </bean>

    <bean name="javax.sql.DataSource/voyager" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="java:comp/env/jdbc/voyager"/>
    </bean>

    <bean id="edu.stanford.irt.laneweb.search.MetaSearchManagerSource"
        class="edu.stanford.irt.laneweb.search.MetaSearchManagerSource" destroy-method="dispose"/>

    <bean id="edu.stanford.irt.laneweb.user.UserDao" class="edu.stanford.irt.laneweb.user.UserDao">
        <property name="subjectSource">
            <bean class="edu.stanford.irt.laneweb.user.SubjectSource">
                <property name="name" value="IRT_K5"/>
            </bean>
        </property>
        <property name="ldapTemplate">
            <bean class="org.springframework.ldap.core.LdapTemplate">
                <constructor-arg>
                    <bean class="org.springframework.ldap.core.support.LdapContextSource">
                        <property name="urls">
                            <list>
                                <value>ldap://ldap.stanford.edu/</value>
                                <value>ldap://ldap1.stanford.edu/</value>
                                <value>ldap://ldap2.stanford.edu/</value>
                                <value>ldap://ldap3.stanford.edu/</value>
                                <value>ldap://ldap4.stanford.edu/</value>
                            </list>
                        </property>
                        <property name="base" value="cn=people,dc=stanford,dc=edu"/>
                        <property name="authenticationStrategy">
                            <bean class="edu.stanford.irt.laneweb.user.GSSAPIAuthenticationStrategy"
                            />
                        </property>
                        <property name="baseEnvironmentProperties">
                            <map>
                                <entry key="com.sun.jndi.ldap.connect.timeout" value="5000"/>
                            </map>
                        </property>
                    </bean>
                </constructor-arg>
            </bean>
        </property>
        <property name="ezproxyKey">
            <bean class="org.springframework.jndi.JndiObjectFactoryBean">
                <property name="jndiName" value="java:comp/env/ezproxy-key"/>
            </bean>
        </property>
        <property name="cryptor" ref="edu.stanford.irt.laneweb.Cryptor"/>
    </bean>

    <bean id="edu.stanford.irt.laneweb.Cryptor" class="edu.stanford.irt.laneweb.Cryptor">
        <property name="key" value="stanfordlanelibraryir"/>
    </bean>

    <bean name="edu.stanford.irt.eresources.CollectionManager/laneconnex"
        class="edu.stanford.irt.eresources.impl.CollectionManagerImpl">
        <property name="dataSource" ref="javax.sql.DataSource/eresources"/>
    </bean>

    <bean name="edu.stanford.irt.eresources.CollectionManager/history"
        class="edu.stanford.irt.laneweb.eresources.HistoryCollectionManager">
        <property name="dataSource" ref="javax.sql.DataSource/eresources"/>
    </bean>

    <bean id="edu.stanford.irt.querymap.QueryMapper" class="edu.stanford.irt.querymap.QueryMapper">
        <property name="descriptorManager" ref="edu.stanford.irt.querymap.DescriptorManager"/>
        <property name="queryToDescriptor">
            <bean class="edu.stanford.irt.querymap.QueryToDescriptor">
                <property name="descriptorManager" ref="edu.stanford.irt.querymap.DescriptorManager"/>
                <property name="httpClient" ref="org.apache.commons.httpclient.HttpClient"/>
            </bean>
        </property>
    </bean>

    <bean id="edu.stanford.irt.querymap.DescriptorManager"
        class="edu.stanford.irt.querymap.DescriptorManager"/>

    <bean id="edu.stanford.irt.lane.icd9.ICD9Translator"
        class="edu.stanford.irt.lane.icd9.ICD9Translator"/>

    <bean id="edu.stanford.irt.lane.mesh.export.MeshDescriptorManager"
        class="edu.stanford.irt.lane.mesh.export.MeshDescriptorManager"/>

    <bean id="edu.stanford.irt.laneweb.proxy.ProxyHostManager"
        class="edu.stanford.irt.laneweb.proxy.ProxyHostManager">
        <property name="dataSource" ref="javax.sql.DataSource/eresources"/>
    </bean>

    <bean id="org.apache.cocoon.components.modules.input.AbstractInputModule"
        class="edu.stanford.irt.laneweb.inputmodule.AbstractInputModule" abstract="true">
        <property name="userDao" ref="edu.stanford.irt.laneweb.user.UserDao"/>
    </bean>

    <bean name="org.apache.cocoon.components.modules.input.InputModule/proxy-links"
        class="edu.stanford.irt.laneweb.inputmodule.ProxyLinks"
        parent="org.apache.cocoon.components.modules.input.AbstractInputModule">
        <property name="proxyRegex">
            <list>
                <!-- VPN 171.65.16.0 - 171.65.31.255 -->
                <value>^171\.66\.(1[6-9]|2[0-9]|3[0-1])\.\S+</value>
                <!-- hospital 171.65.44.0 - 171.65.44.255 -->
                <value>^171\.65\.44\.\S+</value>
                <!-- hospital 171.65.125.0 - 171.65.125.255 -->
                <value>^171\.65\.125\.\S+</value>
                <!-- hospital 171.65.128.0 - 171.65.199.255 -->
                <value>^171\.65\.1(2[8-9]|[3-9][0-9])\.\S+</value>
                <!-- hospital 171.65.200.0 - 171.65.255.255 -->
                <value>^171\.65\.2[0-5][0-9]\.\S+</value>
            </list>
        </property>
        <property name="noProxyRegex">
            <list>
                <value>^171\.6[4-7]\.\S+</value>
            </list>
        </property>
    </bean>

    <bean name="org.apache.cocoon.components.modules.input.InputModule/user"
        class="edu.stanford.irt.laneweb.inputmodule.UserInputModule"
        parent="org.apache.cocoon.components.modules.input.AbstractInputModule"/>

    <bean name="org.apache.cocoon.components.modules.input.InputModule/template"
        class="edu.stanford.irt.laneweb.inputmodule.Template"
        parent="org.apache.cocoon.components.modules.input.AbstractInputModule">
        <property name="templateConfig">
            <map key-type="java.lang.String" value-type="java.lang.String">
                <entry key="^(stage/|)services/spaces/reserve/\S+" value="none"/>
                <entry key="^(stage/|)bassett/raw/bassettLargerView.html?.*+"
                    value="bassettLargerView"/>
            </map>
        </property>
    </bean>

    <bean name="org.apache.cocoon.components.modules.input.InputModule/mt-munge"
        class="edu.stanford.irt.laneweb.inputmodule.MTMungingInputModule"/>

    <bean name="org.apache.cocoon.generation.Generator/file"
        class="org.apache.cocoon.generation.FileGenerator" scope="prototype">
        <property name="parser" ref="org.apache.cocoon.core.xml.SAXParser"/>
    </bean>

    <bean name="org.apache.cocoon.generation.Generator/search-describe"
        class="edu.stanford.irt.laneweb.search.DescribeGenerator" scope="prototype">
        <property name="metaSearchManagerSource"
            ref="edu.stanford.irt.laneweb.search.MetaSearchManagerSource"/>
    </bean>

    <bean name="org.apache.cocoon.generation.Generator/search"
        class="edu.stanford.irt.laneweb.search.SearchGenerator" scope="prototype">
        <property name="metaSearchManagerSource"
            ref="edu.stanford.irt.laneweb.search.MetaSearchManagerSource"/>
        <property name="defaultTimeout" value="60000"/>
        <property name="ICD9Translator" ref="edu.stanford.irt.lane.icd9.ICD9Translator"/>
    </bean>

    <bean name="org.apache.cocoon.generation.Generator/html"
        class="edu.stanford.irt.laneweb.HTMLGenerator" scope="prototype"/>

    <bean name="org.apache.cocoon.generation.Generator/querymap"
        class="edu.stanford.irt.laneweb.querymap.QueryMapGenerator">
        <property name="queryMapper" ref="edu.stanford.irt.querymap.QueryMapper"/>
    </bean>

    <bean name="org.apache.cocoon.generation.Generator/link-scan"
        class="edu.stanford.irt.laneweb.eresources.LinkScanGenerator">
        <property name="dataSource" ref="javax.sql.DataSource/eresources"/>
    </bean>

    <bean name="org.apache.cocoon.generation.Generator/spellcheck"
        class="edu.stanford.irt.laneweb.spellcheck.SpellCheckGenerator">
        <property name="spellChecker">
            <bean class="edu.stanford.irt.spell.GoogleToolbarSpellChecker"/>
        </property>
    </bean>

    <bean name="org.apache.cocoon.generation.Generator/eresources-count"
        class="edu.stanford.irt.laneweb.eresources.EresourcesCountGenerator" scope="prototype">
        <property name="types">
            <set>
                <value>ej</value>
                <value>database</value>
                <value>video</value>
                <value>book</value>
                <value>cc</value>
                <value>lanesite</value>
                <value>software</value>
            </set>
        </property>
        <property name="subsets">
            <value>biotools</value>
        </property>
        <property name="collectionManager"
            ref="edu.stanford.irt.eresources.CollectionManager/laneconnex"/>
    </bean>

    <bean name="org.apache.cocoon.generation.Generator/er-browse"
        class="edu.stanford.irt.laneweb.eresources.BrowseEresourcesGenerator" scope="prototype">
        <property name="collectionManager"
            ref="edu.stanford.irt.eresources.CollectionManager/laneconnex"/>
    </bean>

    <bean name="org.apache.cocoon.generation.Generator/er-core"
        class="edu.stanford.irt.laneweb.eresources.CoreEresourcesGenerator" scope="prototype">
        <property name="collectionManager"
            ref="edu.stanford.irt.eresources.CollectionManager/laneconnex"/>
    </bean>

    <bean name="org.apache.cocoon.generation.Generator/er-mesh"
        class="edu.stanford.irt.laneweb.eresources.MeSHEresourcesGenerator" scope="prototype">
        <property name="collectionManager"
            ref="edu.stanford.irt.eresources.CollectionManager/laneconnex"/>
    </bean>

    <bean name="org.apache.cocoon.generation.Generator/er-search"
        class="edu.stanford.irt.laneweb.eresources.SearchEresourcesGenerator" scope="prototype">
        <property name="collectionManager"
            ref="edu.stanford.irt.eresources.CollectionManager/laneconnex"/>
    </bean>

    <bean name="org.apache.cocoon.generation.Generator/bassett"
        class="edu.stanford.irt.laneweb.eresources.bassett.BassettEresourcesGenerator"
        scope="prototype">
        <property name="collectionManager">
            <bean class="edu.stanford.irt.laneweb.eresources.bassett.BassettCollectionManager">
                <property name="dataSource" ref="javax.sql.DataSource/eresources"/>
            </bean>
        </property>
    </bean>

    <bean name="org.apache.cocoon.generation.Generator/bassett-accordion"
        class="edu.stanford.irt.laneweb.eresources.bassett.BassettAccordionEresourcesGenerator"
        scope="prototype">
        <property name="collectionManager">
            <bean class="edu.stanford.irt.laneweb.eresources.bassett.BassettCollectionManager">
                <property name="dataSource" ref="javax.sql.DataSource/eresources"/>
            </bean>
        </property>
    </bean>

    <bean name="org.apache.cocoon.generation.Generator/history-search"
        class="edu.stanford.irt.laneweb.eresources.SearchEresourcesGenerator" scope="prototype">
        <property name="collectionManager"
            ref="edu.stanford.irt.eresources.CollectionManager/history"/>
    </bean>

    <bean name="org.apache.cocoon.generation.Generator/history-count"
        class="edu.stanford.irt.laneweb.eresources.EresourcesCountGenerator" scope="prototype">
        <property name="types">
            <set>
                <value>book</value>
                <value>movie</value>
                <value>serial</value>
                <value>graphic</value>
                <value>thesis</value>
                <value>object</value>
                <value>people</value>
                <value>organization</value>
                <value>article</value>
                <value>chapter</value>
                <value>event</value>
                <value>finding aid</value>
            </set>
        </property>
        <property name="collectionManager"
            ref="edu.stanford.irt.eresources.CollectionManager/history"/>
    </bean>

    <bean name="org.apache.cocoon.generation.Generator/directory"
        class="org.apache.cocoon.generation.DirectoryGenerator" scope="prototype"> </bean>

    <bean name="org.apache.cocoon.transformation.Transformer/namespace-filter"
        class="edu.stanford.irt.laneweb.NamespaceFilter" scope="prototype"/>

    <bean name="org.apache.cocoon.transformation.Transformer/proxy-links"
        class="edu.stanford.irt.laneweb.proxy.ProxyLinkTransformer" scope="prototype">
        <property name="proxyHostManager" ref="edu.stanford.irt.laneweb.proxy.ProxyHostManager"/>
    </bean>

    <bean name="org.apache.cocoon.transformation.Transformer/cme-links"
        class="edu.stanford.irt.laneweb.cme.CMELinkTransformer" scope="prototype"> </bean>

    <bean name="org.apache.cocoon.transformation.Transformer/xinclude"
        class="edu.stanford.irt.laneweb.LanewebXIncludeTransformer" scope="prototype">
        <property name="parser" ref="org.apache.cocoon.core.xml.SAXParser"/>
        <property name="serviceManager" ref="org.apache.avalon.framework.service.ServiceManager"/>
    </bean>

    <bean name="org.apache.cocoon.reading.Reader/resource"
        class="edu.stanford.irt.laneweb.NoCacheBigReader" scope="prototype"/>

    <bean name="org.apache.cocoon.reading.Reader/extensions-suggest"
        class="edu.stanford.irt.laneweb.eresources.ExtensionsSuggestReader">
        <property name="dataSource" ref="javax.sql.DataSource/eresources"/>
    </bean>

    <bean name="org.apache.cocoon.reading.Reader/mesh-suggest"
        class="edu.stanford.irt.laneweb.mesh.MeshSuggestReader">
        <property name="meshDescriptorManager"
            ref="edu.stanford.irt.lane.mesh.export.MeshDescriptorManager"/>
    </bean>

    <bean name="org.apache.cocoon.reading.Reader/ezproxy-servers"
        class="edu.stanford.irt.laneweb.eresources.EzproxyServersReader">
        <property name="dataSource" ref="javax.sql.DataSource/eresources"/>
    </bean>

    <bean name="org.apache.cocoon.reading.Reader/txt-resource"
        class="edu.stanford.irt.laneweb.TxtResourceReader" scope="prototype">
        <property name="defaultPath" value="/"/>
        <property name="valueToSubstitute" value="/\./\."/>
        <!-- uses regex so /./. is what is actually substituted -->
    </bean>

    <bean name="org.apache.cocoon.reading.Reader/gziptxt-resource"
        class="edu.stanford.irt.laneweb.gzip.GZipTxtResourceReader" scope="prototype">
        <property name="defaultPath" value="/"/>
        <property name="valueToSubstitute" value="/\./\."/>
        <!-- uses regex so /./. is what is actually substituted -->
        <property name="processInfoProvider" ref="org.apache.cocoon.processing.ProcessInfoProvider"
        />
    </bean>

    <bean name="org.apache.cocoon.reading.Reader/search-url-tester"
        class="edu.stanford.irt.laneweb.search.UrlTester" scope="prototype">
        <property name="metaSearchManagerSource"
            ref="edu.stanford.irt.laneweb.search.MetaSearchManagerSource"/>
    </bean>

    <bean name="org.apache.cocoon.reading.Reader/querymap"
        class="edu.stanford.irt.laneweb.querymap.QueryMapReader">
        <property name="queryMapper" ref="edu.stanford.irt.querymap.QueryMapper"/>
    </bean>

    <bean name="org.apache.cocoon.reading.Reader/icd9"
        class="edu.stanford.irt.laneweb.icd9.ICD9JSONReader" scope="prototype">
        <property name="ICD9Translator" ref="edu.stanford.irt.lane.icd9.ICD9Translator"/>
    </bean>

    <bean name="org.apache.cocoon.selection.Selector/gzip"
        class="edu.stanford.irt.laneweb.gzip.GZipAcceptEncodingSelector">
        <property name="processInfoProvider" ref="org.apache.cocoon.processing.ProcessInfoProvider"
        />
    </bean>

    <bean name="org.apache.cocoon.acting.Action/voyager"
        class="edu.stanford.irt.laneweb.voyager.VoyagerAction">
        <property name="voyagerLogin">
            <bean class="edu.stanford.irt.laneweb.voyager.VoyagerLogin">
                <property name="dataSource" ref="javax.sql.DataSource/voyager"/>
            </bean>
        </property>
        <property name="userDao" ref="edu.stanford.irt.laneweb.user.UserDao"/>
    </bean>

    <bean name="org.apache.cocoon.acting.Action/form-redirect"
        class="edu.stanford.irt.laneweb.FormRedirectAction"/>

    <bean name="org.apache.cocoon.acting.Action/webdash"
        class="edu.stanford.irt.laneweb.webdash.WebdashAction">
        <property name="webdashLogin">
            <bean class="edu.stanford.irt.laneweb.webdash.WebdashLogin">
                <property name="webdashKey">
                    <bean class="org.springframework.jndi.JndiObjectFactoryBean">
                        <property name="jndiName" value="java:comp/env/webdash-key"/>
                    </bean>
                </property>
            </bean>
        </property>
        <property name="userDao" ref="edu.stanford.irt.laneweb.user.UserDao"/>
    </bean>

    <bean name="org.apache.cocoon.acting.Action/loginAction"
        class="edu.stanford.irt.laneweb.LoginAction"/>

    <bean name="org.apache.cocoon.acting.Action/persistentLoginAction"
        class="edu.stanford.irt.laneweb.PersistentLoginAction">
        <property name="userDao" ref="edu.stanford.irt.laneweb.user.UserDao"/>
        <property name="cryptor" ref="edu.stanford.irt.laneweb.Cryptor"/>
    </bean>

    <bean name="org.apache.cocoon.acting.Action/cmeRedirectAction"
        class="edu.stanford.irt.laneweb.cme.CMERedirectAction"> </bean>

    <bean name="org.apache.cocoon.acting.Action/search-context-reloader"
        class="edu.stanford.irt.laneweb.search.SearchContextReloaderAction" scope="singleton">
        <property name="metaSearchManagerSource"
            ref="edu.stanford.irt.laneweb.search.MetaSearchManagerSource"/>
        <property name="svnUrlProject">
            <value>https://irt-svn.stanford.edu/repos/irt/lane/search/tags/search-spring-</value>
        </property>
        <property name="svnUrlPath">
            <value>/src/main/resources/spring/metasearch.xml</value>
        </property>
    </bean>

    <bean name="org.apache.cocoon.serialization.Serializer/xhtml"
        class="org.apache.cocoon.serialization.XMLSerializer" scope="prototype"
        parent="org.apache.cocoon.serialization.AbstractTextSerializer">
        <pipeline:component mime-type="text/html"/>
        <property name="format">
            <props>
                <prop key="doctype-public">-//W3C//DTD XHTML 1.0 Strict//EN</prop>
                <prop key="doctype-system">http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd</prop>
                <prop key="encoding">UTF-8</prop>
                <prop key="indent">yes</prop>
                <prop key="omit-xml-declaration">yes</prop>
            </props>
        </property>
        <property name="transformerFactory" value="net.sf.saxon.TransformerFactoryImpl"/>
    </bean>

    <bean name="org.apache.cocoon.serialization.Serializer/gzipxhtml"
        class="edu.stanford.irt.laneweb.gzip.GZipXMLSerializer" scope="prototype"
        parent="org.apache.cocoon.serialization.AbstractTextSerializer">
        <pipeline:component mime-type="text/html"/>
        <property name="format">
            <props>
                <prop key="doctype-public">-//W3C//DTD XHTML 1.0 Strict//EN</prop>
                <prop key="doctype-system">http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd</prop>
                <prop key="encoding">UTF-8</prop>
                <prop key="indent">yes</prop>
                <prop key="omit-xml-declaration">yes</prop>
            </props>
        </property>
        <property name="transformerFactory" value="net.sf.saxon.TransformerFactoryImpl"/>
        <property name="processInfoProvider" ref="org.apache.cocoon.processing.ProcessInfoProvider"
        />
    </bean>

    <bean name="org.apache.cocoon.serialization.Serializer/text"
        class="org.apache.cocoon.serialization.TextSerializer" scope="prototype"
        parent="org.apache.cocoon.serialization.AbstractTextSerializer">
        <pipeline:component mime-type="text/plain"/>
    </bean>

    <bean id="org.apache.cocoon.el.ExpressionFactory"
        class="org.apache.cocoon.el.impl.DefaultExpressionFactory">
        <property name="expressionCompilers">
            <map>
                <entry key="default">
                    <bean class="org.apache.cocoon.el.impl.jxpath.JXPathCompiler"/>
                </entry>
            </map>
        </property>
    </bean>

    <bean id="org.apache.cocoon.el.objectmodel.ObjectModel"
        class="org.apache.cocoon.el.impl.objectmodel.ObjectModelImpl" scope="request">
        <property name="initialEntries">
            <map>
                <entry key="contextBean">
                    <bean class="edu.stanford.irt.laneweb.LanewebObjectModelProvider">
                        <constructor-arg ref="org.apache.cocoon.processing.ProcessInfoProvider"/>
                        <constructor-arg>
                            <map>
                                <entry key="live-base">
                                    <bean class="org.springframework.jndi.JndiObjectFactoryBean">
                                        <property name="jndiName" value="java:comp/env/live-base"/>
                                    </bean>
                                </entry>
                                <entry key="stage-base">
                                    <bean class="org.springframework.jndi.JndiObjectFactoryBean">
                                        <property name="jndiName" value="java:comp/env/stage-base"/>
                                    </bean>
                                </entry>
                                <entry key="medblog-base">
                                    <bean class="org.springframework.jndi.JndiObjectFactoryBean">
                                        <property name="jndiName" value="java:comp/env/medblog-base"/>
                                    </bean>
                                </entry>
                            </map>
                        </constructor-arg>
                        <constructor-arg ref="edu.stanford.irt.laneweb.user.UserDao"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

</beans>
